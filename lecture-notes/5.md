---
sidebar_position: 5
lecture_number: 5
title: Lecture 5 - Conditionals, Tests, and spy
---


TODO: add `spy`, maybe `ask`?

TODO: make design process explicit; by end of this day, we have all pieces -- make them step by step.

## Outcomes: [1.1](/outcomes/#(1.1)),  [2.1](/outcomes/#(2.1)), [3.1](/outcomes/#(3.1))


## Decisions and Booleansâ€”From Parking Fees to Driving Eligibility

### **Lecture Objectives**
- Understand why and how to use conditionals (if expressions) in programs.
- Learn about booleans and how to combine them with operators like **and**, **or**, and **not**.
- Practice writing functions that use conditionals and combine functions together.
- Learn how to write function examples using `where`

---

### **I. Introduction and Motivation (5 minutes)**
- **Context:**
  Many problems require making _choices_ and doing different things depending on the result of particular questions.
  
  For example, we might look at the weather, and if it was sunny, choose to wear a sun-hat, but if it was colder, do something different.
  
---

### **II. Example: Choosing Headwear (10 minutes)**
#### **A. Scenario Description**
- **Example Scenario:**
  You look at the weather, and if the temperature is:
  - Above 80F/27C you wear a "sun hat"
  - Above 50F/10C but below 80F/27C you wear "no hat"
  - Below 50F/10C you wear a "winter hat"

#### **B. Exploring Examples (Do Now)**
- Ask students:
  - "What hat would you expect if the temperature was 80F? What about 80.01F, 50F, and 35F?"
  Encourage them to identify the boundary values.

- Let's write down some examples of a function we will define later:
  - `choose-hat(80) is "no hat"`
  - `choose-hat(80.01) is "sun hat"`
  - `choose-hat(50) is "winter hat"`
  - `choose-hat(35) is "winter hat"`

### **III. Introduction to Booleans (10 minutes)**
#### **A. What Are Booleans?**
- **Definition:**
  Booleans are the values `true` and `false`. They result from comparisons and logical tests.

- **Simple Examples (Do Now):**
  - Ask students to type:
    ```pyret
    1 < 2    # Should produce true
    5 == 5   # Should produce true
    5 == 4   # Should produce false
    ```

#### **B. Other Boolean Operations**
- **Comparisons and Equality:**
  Explain that in addition to `<` and `==`, we also have operators like `>=` or type-specific ones (e.g., `string-equal`).
- **Combining Booleans:**
  Introduce:
  - **and:** `(1 < 2) and (3 < 4)` yields `true`
  - **or:** `(1 < 2) or (5 < 3)` yields `true`
  - **not:** `not(1 < 2)` yields `false`

- **Interactive Exercise:**
  Ask:
  - "What do you think `(2 < 1) or (4 == 4)` evaluates to?"
  - "How about `not(2 < 1)`?"

- **Discussion:**
  Emphasize that booleans let us express yes/no, true/false decisions, which are the heart of conditionals.

---

#### **IV. Writing a Basic Function with a Conditional**
- **Explain the if-expression syntax:**
  - An if-expression asks questions that produce booleans and then chooses
    corresponding answers. With more than two options, the middle are captured
    by `else if`. These questions are run in order, and the answer that
    corresponds to the first `true` is returned.

- **Write the Function (code shown on screen):**
  ```pyret
  fun choose-hat(temp-in-F :: Number) -> String:
    doc: "Choose hat to wear based on temp fahrenheit: "sun hat" if > 80, "no hat" if <= 80 and > 50, "winter hat" if < 50."
    if temp-in-F > 80:
      "sun hat"
    else if temp-in-F > 50:
      "no hat"
    else:
      "winter hat"
    end
  end
  ```

- **Doc strings**: This introduces a new feature of functions: documentation
  strings! All functions should have concise descriptions of how they work. For
  very simple functions, these may be similar to the function implementation,
  but as functions become more complex, these doc strings are invaluable for
  understanding how to **use** the code, rather than how it **works**.

- **Live Demo:**
  - Run the function and then test:
    ```arr
    choose-hat(80) # "no hat"
    choose-hat(80.01) # "sun hat"
    choose-hat(50) # "winter hat"
    choose-hat(35) # "winter hat"
    ```
- **Discussion:**
  Point out how the if-expression checks conditions in order and returns the first true branch.


### **V. Asking Multiple Questions and Combining Conditions (10 minutes)**
#### **A. Refining Our Function with Explicit "Between" Conditions**
- **Motivation:**
  Although our earlier `choose-hat` works, we can be more explicit with combined conditions.

- **Rewrite the Middle Case:**
  ```pyret
  fun choose-hat2(temp-in-F :: Number) -> String:
    doc: "Choose hat to wear based on temp fahrenheit: "sun hat" if > 80, "no hat" if <= 80 and > 50, "winter hat" if < 50."
    if temp-in-F > 80:
      "sun hat"
    else if (temp-in-F > 50) and (temp-in-F <= 80):
      "no hat"
    else:
      "winter hat"
    end
  end
  ```
  
- **Live Demo:**
  Test the function with various inputs.

- **Discussion:**
  - Note that our doc string didn't change, as the behavior is the same. 
  - Questions: 
    - Why might we want to write it this way, rather than as we did before? 
    - Why do we include parentheses in the boolean expression? What might happen if we left them off?

#### **B. New Example: Determining Driving Eligibility**
- **Scenario:**
  Write a function that determines if a person can drive. Let's say the rules are: a person can drive if they are **16 or older** and they **have a license**.

- **Function Definition:**
  ```pyret
  fun can-drive(age :: Number, has-license :: Boolean) -> Boolean:
    doc: "Return true if age is at least 16 and the person has a driver's license."
    age >= 16 and has-license
  end
  ```
- **Interactive Demo:**
  Evaluate:
  ```pyret
  can-drive(15, true)   # Expected: false
  can-drive(16, false)  # Expected: false
  can-drive(18, true)   # Expected: true
  ```
- **Discussion:**
  While `and` combined these two booleans together, do we actually need both of these tests?
  

---

### **VI. Evaluating Expressions by Reduction (5 minutes)**
- **Walk Through a Step-by-Step Reduction:**
  Use `choose-hat(35)` as an example.
  - Start with:
    ```pyret
    if 35 > 80:
      "sun hat"
    else if 35 > 50:
      "no hat"
    else:
      "winter hat"
    end
    ```
  - Explain that since `35 > 80` is false, we check the next condition.
  - Since `35 > 50` is also false, we move to the else branch, yielding `"winter hat"`.

- **Discussion:**
  Emphasize that understanding these steps can help debug programs.

---

### **VII. Composing Functions (5 minutes)**
#### **A. Combining Functions in a Computation**
- **Scenario:**
  Now imagine you got new sunglasses, and want to have the string you return always add ", and glasses" to what you will wear.
  
- **Define `add-glasses` Function:**
  ```pyret
  fun add-glasses(outfit :: String) -> String:
    doc: "Adds ', and glasses' to input."
    outfit + ", and glasses"
  end
  ```
- **Compose the Functions:**
  - Write an expression that determines the final outfit:
    ```pyret
    add-glasses(choose-hat(75))
    ```
- **Live Demo:**
  Evaluate the composition and show that it first computes the hat ("no hat") then adds glasses!

#### **B. Discussing Evaluation:**
- Compare two styles:
  - One that names the intermediate result:
    ```pyret
    output = choose-hat(75)
    add-glasses(outfit)
    ```
  - And one that nests the calls.
- Ask: "Which style do you find clearer and why?"

---

### **VIII. Local Variables (5 minutes)**
#### **A. Scenario: Add an optional visor**
- **New Rule:**
  Some people have a visor that they wear when the temperature goes above 95F/35C!

- **Define the Function Using Nested Conditionals:**
  ```pyret
  fun choose-hat-visor(temp-in-F :: Number, has-visor :: Boolean) -> String:
    doc: "Choose hat and, if has-visor, use a visor at temps above 95F/35C."
    base = choose-hat(temp-in-F)
    if has-visor and (temp-in-F > 90):
      "visor"
    else:
      base
    end
  end
  ```
- **Live Demo:**
  Test with:
  ```pyret
  choose-hat(80) # "no hat"
  choose-hat(80.01) # "sun hat"
  choose-hat(50) # "winter hat"
  choose-hat(35) # "winter hat"
  choose-hat(90,true) # "no hat"
  choose-hat(91,true) # "visor"
  choose-hat(91,false) # "no hat"
  ```
- **Discussion:**
  Explain that the local variable `base` is defined only inside the function. Emphasize that names defined within a function (like `base`) are not accessible outside.

---

### **VIII. Recap and Q&A (5 minutes)**
- **Key Points Recap:**
  - **Conditionals:**
    How `if`, `else if`, and `else` let your program decide between different outcomes.
  - **Booleans:**
    Exactly two values `true` and `false` and how to combine them using **and**, **or**, and **not**.
  - **Multiple Conditions:**
    Using combined boolean expressions (with parentheses) to capture "between" conditions.
  - **Function Composition:**
    Combining functions (e.g., computing a fee then applying tax) and the role of local variables in a function's directory.

- **Questions for Discussion:**
  - "How does the order of conditions in an if-expression affect the result?"
  - "When might you prefer to use intermediate variables (like `base`) rather than composing functions directly?"
